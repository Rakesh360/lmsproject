{% extends 'EasyHireApp/administrator/base.html' %}
{% block content %}
{% load static %}

<div class="row" style="padding:1em;">
    <div class="col s12" style="margin-top:1%;">
      <h5><blockquote>Stream Lists
        <a class="btn blue modal-trigger right" href="#modal-add-new-stream">Add New Stream</a>
      </blockquote></h5>
    </div>
    <div class="col s12">
      <br>
      <table id="table-streams-details">
          <thead>
              <tr>
                  <th>Streams</th>
                  <th>Total Applicants</th>
                  <th>Delete</th>
              </tr>
          </thead>
          <tbody>
            {% for stream in stream_objs %}
              <tr>
                  <td>{{ stream.name }}</td>
                  <td>
                      {% for no_applicant in no_applicants %}
                    {% if no_applicant.stream == stream.name %}
                      <!--<a class="blue-text modal-trigger" href="#modal-applicant-stream-{{ stream }}"><u>{{ no_applicant.count }}</u></a>-->
                          <a class="blue-text">{{ no_applicant.count }}</a>
                    {% endif %}
                  {% endfor %}
                  <div id="modal-applicant-stream-{{ stream }}" class="modal" style="border:0.1em solid black;">
                <div class="modal-content row s12">
                  <div class="col s12">
                      <h6>Applicants with stream: {{ stream.name }}<sup>*</sup></h6>
                      <ul class="collection">
                        {% for applicant in applicant_objs %}
                          {% if applicant.stream == stream %}
                            <li class="collection-item"><b>Name:</b> <u>{{ applicant.name }}</u> <b>|</b>  <b>College:</b> <u>{{ applicant.college_name}}</u> <b>|</b> <b>Percentage:</b> <u>{{ applicant.percentage }}</u> <b>|</b> <b>Year of Passing:</b> <u>{{ applicant.year_of_passing }}</u> </li>
                          {% endif%}
                        {% endfor %}
                      </ul>
                    </div>
                </div>
              </div>
                  </td>
                  <td><a class="green-text modal-trigger" href="#modal-applicant-stream-{{ stream.pk }}"><i class="material-icons">delete</i></a></td>
              </tr>
              <div id="modal-applicant-stream-{{ stream.pk }}" class="modal" style="border:0.1em solid black;">
                <div class="modal-content row s12">
                  <div class="col s10">
                    <h5>Are you sure you want to <span class="red-text">delete</span> this?</h5>
                    <p> Deleting this will directly affect the candidate profile. We recommend not to delete this.</p>
                    <a href="javascript:void(0)" class="btn grey modal-close">Cancel</a>
                    <a class="btn red" id="btn-delete" onclick="delete_stream('{{ stream.pk }}')">Delete</a>
                  </div>
                </div>
            </div>
            {% endfor %}
          </tbody>
        </table>      
    </div>
</div>

<div id="modal-add-new-stream" class="modal" style="border:0.1em solid black;">
    <div class="modal-content row s12">
      <div class="input-field col s12">
          <h6>Stream Name<sup>*</sup></h6>
            <input id="input-stream-name" type="text" class="validate">
        </div>
    </div>
    <div class="modal-footer">
      <a href="javascript:void(0)" class="btn grey modal-close">Cancel</a>
      <a class="btn blue safe modal-close" id="btn-add-stream">Add</a>
    </div>
</div>
{% endblock %}
